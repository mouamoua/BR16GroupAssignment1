Class Diagram:
https://go.gliffy.com/go/publish/12478789

Sequence Diagram:
https://www.websequencediagrams.com/#open=336953

title Program Sequence

Nurse(USER)->MainGui: opens app
MainGui->MainGui: initialize()
MainGui->MainGui: open()
MainGui->MainGui: createContents()

Nurse(USER)->MainGui: loadFile()
MainGui->jsonFileOperations: getFile(filePath)

jsonFileOperations->PatientReadingsParser: start(filePath)

note over PatientReadingsParser
???
end note over PatientReadingsParser
PatientReadingsParser-->MainGui: trialFileData
MainGui->PatientReadingsParser: trialFileData.start()
PatientReadingsParser->PatientReadingsParser: getReadings()
note over PatientReadingsParser
???
end note over PatientReadingsParser

MainGui->Trial: Trial(trialFileData.patient_readings)
Trial-->MainGui: trial
Trial->Trial: createPatientList()
loop patientReadings
Trial->Trial: patientId = patientReading.get("patient_id")
loop patients
opt patient.getId() == patientId
Trial->Trial: isExistingPatient = true\nbreak
end
end
opt isExistingPatient == false
Trial->Trial: patients.add(new Patient(patientId))
end
Trial->Reading: Reading(patientReading)
Reading-->Trial: reading
Trial->Trial: addReadingToPatient(reading.getPatientId(), reading)
Trial->Patient: Patient()
Patient-->Trial: patient
Trial->Trial: findPatientById(patientId())
Trial->Patient: Patient()
Patient-->Trial: matchingPatient
loop patients
opt patient.getId() == patientId
Trial->Trial: isExistingPatient = true\nbreak
end
end

opt patient.isPartOfTrial == true
Trial->Trial: patient.addReading(reading)
end
end
MainGui->Trial: getPatients()

Nurse(USER)->MainGui: addPatient()
MainGui->Trial: trial.addPatient(patientId)
Trial->Patient: Patient(patientId)
Patient-->Trial: patient
Trial->Trial: patients.add(patient)

Nurse(USER)->MainGui: addReading()
MainGui->Trial: trial.addReadingToPatient(patientId, reading)
Trial->Patient: addReading(reading)
opt isPartOfTrial() == true
Patient->Patient: readings.add(reading) 
end

Nurse(USER)->MainGui: saveFile()
MainGui->jsonFileOperations: writeFile(filePath, PatientReadingsParser.patient_readings)

note over PatientReadingsParser
[CRITICAL]

gson.toJson(writer(filePath), object)
end note over PatientReadingsParser

Nurse(USER)->MainGui: changeStatus()
